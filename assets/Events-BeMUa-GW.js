import{o as v,g as b,c as w,a as y,f as r,w as i,i as m,F as C,E as p,d as a,r as E,H as $,t as k}from"./index-BQcwO47v.js";import{a as x}from"./chunk-2RP4XPBM-nGvCzmzp.js";import"./chunk-PC2QB7VM-DflWmKnP.js";const B={__name:"EventDemoComponent",emits:{greet2:null,submit:null,submitwithValidator:({email:o,password:l})=>o&&l?!0:(p.error("Invalid submit event payload!"),!1)},setup(o,{expose:l,emit:n}){const e=n,s=()=>{e("submit",{email:"aa@qq.com"}),e("submitwithValidator",{email:null,password:null})||p.error("事件校验失败依然传递")};v(()=>{let t=0;const u=setInterval(()=>{t++,e("greet2","子组件: greet2",t,100),t===100&&clearInterval(u)},1e3)});function f(){return"hello from child"}return l({greet3:f}),(t,u)=>{const d=b("el-button");return y(),w(C,null,[r(d,{onClick:u[0]||(u[0]=_=>t.$emit("greet1","子组件: greet1"))},{default:i(()=>u[1]||(u[1]=[m("Greet")])),_:1,__:[1]}),r(d,{type:"primary",onClick:s},{default:i(()=>u[2]||(u[2]=[m("submit")])),_:1,__:[2]})],64)}}};function z(o){return{all:o=o||new Map,on:function(l,n){var e=o.get(l);e?e.push(n):o.set(l,[n])},off:function(l,n){var e=o.get(l);e&&(n?e.splice(e.indexOf(n)>>>0,1):o.set(l,[]))},emit:function(l,n){var e=o.get(l);e&&e.slice().map(function(s){s(n)}),(e=o.get("*"))&&e.slice().map(function(s){s(l,n)})}}}const g=z(),M={__name:"MittChildAComponent",setup(o,{emit:l}){const n=()=>{g.emit("MCB","来自A的数据: "+x.person.fullName())};return v(()=>{}),(e,s)=>{const f=b("el-button");return y(),w(C,null,[s[1]||(s[1]=a("div",null,"这是组件A",-1)),r(f,{typr:"primary",onClick:n},{default:i(()=>s[0]||(s[0]=[m("传递事件")])),_:1,__:[0]})],64)}}},V={__name:"MittChildBComponent",setup(o){const l=E();return v(()=>{g.on("*",n=>{console.log(n)}),g.on("MCB",n=>{p.info(n),l.value=n})}),$(()=>{g.off("MCB"),g.all.clear()}),(n,e)=>(y(),w(C,null,[e[0]||(e[0]=a("div",null,"这是组件B",-1)),a("p",null,k(l.value),1)],64))}},A={__name:"Events",setup(o,{emit:l}){v(()=>{p.info({showClose:!0,duration:5e3,message:s.value.greet3()})});const n=(f,t,u)=>{p.success({showClose:!0,duration:5e3,message:f+` 第${t} / ${u}次`})},e=f=>{p.warning({showClose:!0,duration:5e3,message:`submited: ${f.email}, ${f.password}`})},s=E();return(f,t)=>{const u=b("el-link"),d=b("el-card"),_=b("el-tag");return y(),w(C,null,[r(d,null,{header:i(()=>t[0]||(t[0]=[m("事件处理")])),default:i(()=>[t[2]||(t[2]=a("p",null,"事件处理参考:",-1)),r(u,{href:"/Essentials/EventHandling",type:"primary"},{default:i(()=>t[1]||(t[1]=[m("基础>事件处理")])),_:1,__:[1]})]),_:1,__:[2]}),t[13]||(t[13]=a("br",null,null,-1)),r(d,null,{header:i(()=>t[3]||(t[3]=[m("组件事件（emit，实现 子 => 父）")])),default:i(()=>[r(_,{type:"warning",size:"large",style:{"font-size":".8em","font-weight":"bold"}},{default:i(()=>t[4]||(t[4]=[m("可以在子组件使用 $emit('eventName', data) 实现")])),_:1,__:[4]}),t[8]||(t[8]=a("br",null,null,-1)),r(_,{type:"warning",size:"large",style:{"font-size":".8em","font-weight":"bold"}},{default:i(()=>t[5]||(t[5]=[m("也可以在子组件使用 defineEmits 实现")])),_:1,__:[5]}),t[9]||(t[9]=a("br",null,null,-1)),r(_,{type:"warning",size:"large",style:{"font-size":".8em","font-weight":"bold"}},{default:i(()=>t[6]||(t[6]=[m("defineEmits 可以实现数据校验，但校验结果不影响事件传递")])),_:1,__:[6]}),t[10]||(t[10]=a("br",null,null,-1)),r(_,{type:"warning",size:"large",style:{"font-size":".8em","font-weight":"bold"}},{default:i(()=>t[7]||(t[7]=[m("除此之外，可以使用 defineExpose 暴露子组件方法供父组件调用")])),_:1,__:[7]}),t[11]||(t[11]=a("br",null,null,-1)),r(B,{onGreet1:n,onGreet2:n,onSubmit:e,onSubmitwithValidator:e,ref_key:"eventDemoRef",ref:s},null,512)]),_:1,__:[8,9,10,11]}),t[14]||(t[14]=a("br",null,null,-1)),r(d,null,{header:i(()=>t[12]||(t[12]=[m("事件总线（mitt，实现 兄弟 => 兄弟）")])),default:i(()=>[r(M),r(V)]),_:1})],64)}}};export{A as default};
